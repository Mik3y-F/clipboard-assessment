# Ticket Breakdown

We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:-

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**

Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".

You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Your Breakdown Here

### Assumptions

- The facility-agent relationship seems to be a 1-Many relationship. This is inferred from the schema provided otherwise an extra **Agents_Facilities** table would have been provided as part of the schema
- The Custom Agent id feature is a required feature by all the facilities we are currently serving
- A new Agent profile is created everytime an Agent stops working with one facility and starts working with another facility under us.

### Ticket 1: Implementing Custom IDs in the Agent Table

*Description*: Add an extra `custom_facility_id` field to the agent table.

*Acceptance Criteria*:

- An agent can now have a unique custom ID - this ID relating to the one facility they work with.
- Custom IDs can be retrieved when querying the agent details from the facility's perspective.

*Time/Effort Estimates*: This will take about two days. One day for implementing the changes and one day for testing.

*Implementation Details*:

- Modify the Agent table to include a **`custom_facility_id`** field. This field will be nullable as it's optional.
- Ensure that the agent's custom ID can be set when creating or updating the agent record for a facility.
- Update the getShiftsByFacility function to include the custom_id in the metadata about the agent.

### Ticket 2: Adjusting the Reporting Feature to Include Custom IDs

*Description*: Modify the existing `generateReport` function to include custom IDs in the output PDF instead of the internal database IDs.

*Acceptance Criteria*:

- The report generated by the function now includes custom IDs instead of internal database IDs.
- If an agent does not have a custom ID, the report will show an `n/a` message on the pdf report where the custom ID goes
- The generateReport function should accept an optional custom_agent_id parameter that generates a report only for that specifc agent

*Time/Effort Estimates*: This will take about two days for implementation and half a day for testing.

*Implementation Details*:

- Modify the generateReport function to map the agent metadata to the custom_id field instead of the internal database ID.
- If the custom_id field is not present or null, report will show an `n/a` message on the pdf report.
- The generateReport should accept an optional custom_agent_id parameter provided that when provided, the function generates a report only for the agent associated with the custom_agent_id and returns a full report for all agents for the facility when not provided

### Ticket 3: Updating the UI for Facilities to Set Custom IDs for Agents

*Description*: Update the user interface of the platform to allow facilities to input a custom ID for each agent when creating an agent or updating agent details.

*Acceptance Criteria*:

- Facilities can input a custom ID for an agent when creating or updating the agent's record.
- Facilities can see the custom ID in the agent's details page.

*Time/Effort Estimates*: This will take two days for implementation and half a day for testing.

*Implementation Details*:

- Add an input field for the custom ID in the agent creation and update forms.
- Ensure that the custom ID is displayed in the agent's details page.

### Ticket 3: Updating the UI for Report Generation

*Description*: Update the user interface of the platform to allow facilities to input a custom ID for an Agent when generating reports

*Acceptance Criteria*:

- Facilities can input a custom ID for an agent when generating a report
- Facilities can choose not to provide a custom agent id and simply generate a full report

*Time/Effort Estimates*: This will take two days for implementation and half a day for testing.

*Implementation Details*:

- Add an optional input field for the custom ID on the report generation page.
- Ensure that a report can equally be generated for all agents without necessarily passing a custom agent id.
- Handle relevant loading, empty and error states

### Ticket 4: Generating User Documentation and Training

*Description*: Generate user documentation and conduct training for facilities on the use of custom IDs.

*Acceptance Criteria*:

- Clear and concise user documentation on how to assign and use custom IDs is available.
- Users have been trained on the use of custom IDs.

*Time/Effort Estimates*: This will take two days to generate the documentation and one day for training.

*Implementation Details*:

- Document the purpose of custom IDs, how to assign them to agents, and where they will appear in the reports.
- Arrange a training session for users on how to assign and use custom IDs.
